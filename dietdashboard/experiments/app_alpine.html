<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpine.js Example</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>

<body>

    <div x-data="sliderApp()" class="slider-app">
        <div>
            <select x-model="currency">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
            </select>
        </div>

        <template x-for="(slider, index) in sliders" :key="index">
            <div class="slider-container">
                <input type="range" min="0" max="100" step="1" x-model="slider.value" @input="updateMarks(index)">
                <span x-text="slider.value"></span>
                <div x-text="slider.marks"></div>
            </div>
        </template>

        <button @click="optimize">Optimize</button>

        <div x-show="result">
            <h5 x-text="'Total: ' + result.total + ' ' + currency"></h5>
            <table>
                <tr x-for="item in result.items">
                    <td x-text="item.name"></td>
                    <td x-text="item.price"></td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        function sliderApp() {
            return {
                currency: 'USD',
                sliders: [
                    { value: 10, marks: '' },
                    { value: 20, marks: '' },
                ],
                result: null,
                updateMarks(index) {
                    this.sliders[index].marks = 'Value: ' + this.sliders[index].value;
                },
                async optimize() {
                    // Simulating the backend response
                    this.result = {
                        total: (this.sliders.reduce((acc, s) => acc + parseFloat(s.value), 0) * (this.currency === 'USD' ? 1 : 0.85)).toFixed(2),
                        items: [
                            { name: 'Item 1', price: this.sliders[0].value },
                            { name: 'Item 2', price: this.sliders[1].value }
                        ]
                    };
                }
            }
        }
    </script>

</body>

</html>